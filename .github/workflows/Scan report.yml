name: Code Security Scan

on:
  workflow_dispatch:

jobs:
  scan:
    name: Audit and Lint React App
    runs-on: ubuntu-latest  # Or your self-hosted runner if needed

    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install Dependencies
        run: npm install

      - name: Run npm audit (Vulnerability Scan)
        run: |
          echo "=== npm audit report ==="
          npm audit || true  # Allow vulnerabilities to be logged without failing job

      - name: Run ESLint (if available)
        run: |
          if [ -f eslint.config.js ] || [ -f .eslintrc.js ]; then
            echo "=== ESLint Report ==="
            npx eslint . || true
          else
            echo "No ESLint config found, skipping lint check."
          fi
